<!DOCTYPE html>
<html>
	<head>
		<script src="../js/jquery.js"></script>
		<script src="../js/shared.js"></script>
		<link rel="stylesheet" type="text/css" href="../css/shared.css"></link>
		<script>
		
			var TheServer;
			var Self;
			
			var GameDifficulty;			//EASY, NORMAL, HARD, LUNATIC
			var CPUIntelligence;		//BEGINNER, STANDARD, EXPERT
			var NumberOfRounds;			//Between 40 and 60
			var PatentingEnabled;		//true/false
			var RetirementMinimum;		//401k, 500k, 600k, 700k, 800k, 900k, 1m, 999999999
			
			function Initialize()
			{
				GlobalInitialize();
				LoadOptions();
				checkOptions();
				//alert(GameDifficulty + " " + CPUIntelligence + " " + NumberOfRounds + " " + PatentingEnabled + " " + RetirementMinimum);
			}
			
			function GoBack(){
				SaveOptions();
				SwitchToPage("new_game_players.html");
			}
			
			function LoadOptions()
			{		
				GameDifficulty = localStorage.getItem('GameDifficulty');
				CPUIntelligence = localStorage.getItem('CPUIntelligence');
				NumberOfRounds = parseInt(localStorage.getItem('NumberOfRounds'));
				PatentingEnabled = (localStorage.getItem('PatentingEnabled') == 'true');
				RetirementMinimum = parseInt(localStorage.getItem('RetirementMinimum'));
				
				$( "#GameDifficulty").val(GameDifficulty);
				$( "#CPUIntelligence").val(CPUIntelligence);
				$( "#NumberOfRounds").val(NumberOfRounds);
				if (PatentingEnabled)
					$( "#Patenting").val("On");
				else
					$( "#Patenting").val("Off");
				$( "#RetirementMinimum").val(RetirementMinimum);
			}
			function CreateGame(){
				SaveOptions();
				SwitchToPage("game_board.html");
			}
			function SaveOptions()
			{
				localStorage.setItem('GameDifficulty',GameDifficulty);
				localStorage.setItem('CPUIntelligence',CPUIntelligence);
				localStorage.setItem('NumberOfRounds',NumberOfRounds.toString());
				localStorage.setItem('PatentingEnabled',PatentingEnabled.toString());
				localStorage.setItem('RetirementMinimum',RetirementMinimum.toString());
				
				alert("Your preferences have been saved.");
			}
			function RestorePrevious()
			{
				LoadOptions();
				alert("Your previous settings have been restored.");
			}
			
			function ValueToDropDownSelection(theValue, dropdown)
			{
				$('[id=dropdown] option').filter(function() { 
					return ($(this).value() == theValue);
				}).prop('selected', true);
			}
			
			//STV = Selection to Value
			
			function STV_GameDifficulty() { GameDifficulty = $( "#GameDifficulty").val(); }
			function STV_CPUIntelligence() { CPUIntelligence = $( "#CPUIntelligence").val(); }
			function STV_NumberOfRounds() { NumberOfRounds = parseInt($( "#NumberOfRounds").val()); }
			function STV_PatentingEnabled() { PatentingEnabled = ($( "#Patenting").val() == 'On'); }
			function STV_RetirementMinimum() { RetirementMinimum = parseInt($( "#RetirementMinimum").val()); }
			
		</script>
		<style>
			div.OptionsBox{
				position:absolute;
				border-style:solid;
				border-width:5px;
				width:60%;
				height:60%;
				box-shadow: 0px 0px 40px 5px #AAAAAA;
				background-color:rgba(0,0,0,.1);
			}
			div.OptionsBox:hover{
				background-color:rgba(255,255,255,.1);
			}
			.Options{
				position:absolute;
				right:3%;
				width:28%;
				font-family:"Arial";
				font-size:15px;
				font-weight:900;
			}
			.roundSlider{
				position:absolute;
				width:100px;
			}
		</style>
	</head>
	<body onload="Initialize()">
		<div id="MainBackground">
			<div id="ContentContainer">
				<div class="OptionsBox" id="OptionsBox" style="left:20%;top:20%;">
				
					<div class="StandardText" style="font-size:23px;left:3%;top:5%;">Game Difficulty</div>
					<div class="StandardText" style="font-size:23px;left:3%;top:14%;">CPU Intelligence</div>
					<div class="StandardText" style="font-size:23px;left:3%;top:23%;">Product Patenting</div>
					<div class="StandardText" style="font-size:23px;left:3%;top:32%;">Number of Rounds</div>
					<div class="StandardText" style="font-size:23px;left:3%;top:41%;">Retirement Minimum</div>
					
					<select class="Options" id="GameDifficulty" style="top:5%;" onchange="STV_GameDifficulty()">
							<option value="EASY">Easy</option>
							<option value="NORMAL" selected="selected">Normal</option>
							<option value="HARD">Hard</option>
							<option value="LUNATIC">Lunatic</option>
						</select>
						<select class="Options" id="CPUIntelligence" style="top:14%;" onchange="STV_CPUIntelligence()">
							<option value="BEGINNER">Beginner</option>
							<option value="STANDARD" selected="selected">Standard</option>
							<option value="EXPERT">Expert</option>
						</select>
						<select class="Options" id="Patenting" style="top:23%;" onchange="STV_PatentingEnabled()">
							<option value="On" selected="selected">On</option>
							<option value="Off">Off</option>
						</select>
						<select class="Options" id="NumberOfRounds" style="top:32%;" onchange="STV_NumberOfRounds()">
							<option value=40 selected="selected">40</option>
							<option value=45>45</option>
							<option value=50>50</option>
							<option value=55>55</option>
							<option value=60>60</option>
						</select>
						<select class="Options" id="RetirementMinimum" style="top:41%;" onchange="STV_RetirementMinimum()">
							<option value=401000 selected="selected">$401,000</option>
							<option value=500000>$500,000</option>
							<option value=600000>$600,000</option>
							<option value=700000>$700,000</option>
							<option value=800000>$800,000</option>
							<option value=900000>$900,000</option>
							<option value=1000000>$1,000,000</option>
							<option value=999999999>$999,999,999</option>
						</select>
					
					<form>

						<TABLE bgcolor="FFFFFF" border="5" style="position:absolute;top:53%;left:2%;width:96%">
							<TR>
						  <TH COLSPAN="2">Background Music
						  </TH>
						   <TR>
							  <TD>Menus</TD>
							  <TD><input type="file" name="Music_Menu"></TD>
						   </TR>
						   <TR>
							  <TD>In Game</TD>
							  <TD><input type="file" name="Music_Game"></TD>
						   </TR>
						   <TR>
							  <TD>Time's running out!</TD>
							  <TD><input type="file" name="Music_Time"></TD>
						   </TR>
						   <TR>
							  <TD>Final Scores</TD>
							  <TD><input type="file" name="Music_Scores"></TD>
						   </TR>
						</TABLE>
						
					</form>
					
					
					
				</div>
				<div class="StandardText" id="MainTitle" style="left:30%;top:8%;">New Game Options</div>
				<button class="Standard" onclick="CreateGame()" style="left:54%;width:36%;top:85%;font-size:20px">Create Game</button>
				<button class="Standard" onclick="GoBack()" style="left:11%;width:36%;top:85%;font-size:20px">Back</button>
			</div>
		</div>
	</body>
</html>