<!DOCTYPE html>
<html>
	<head>
		<!--
		You have to go up one level in order to access files from other folders.
		.. = One folder up from the current folder.
		-->
		<script src="../js/jquery.js"></script>
		<script src="../js/shared.js"></script>
		<script src="../js/primary_gameboard_operation.js"></script>
		<script type="text/javascript">

			var RotateDir=0;
			var Rotation=0;
			
			function Initialize()
			{
				//The commented code does not function properly yet.
				//When something screws up during runtime, other functions just stop.
				//So I had to comment them out to allow the game board to rotate, which it does.
				GlobalInitialize();
				GameInitialize();
				//var Game=JSON.parse(localStorage.MainGame);
				//alert(Game.Name);
				setInterval("RotateThink();",50);
			}
			function RotateBegin(dir){
				RotateDir=dir*5;
			}
			function RotateEnd(){
				RotateDir=0;
			}
			function RotateThink(){
				if(RotateDir!=0){
					Rotation+=RotateDir;
					RotateDir%=360;
					//if((RotateDir>=360)||(RotateDir<=-360)){RotateDir=0;}
					document.getElementById("GameBoardCircle").style.webkitTransform="rotate("+Rotation.toString()+"deg)";
					document.getElementById("GameBoardCircle").style.MozTransform="rotate("+Rotation.toString()+"deg)";
					/*
					var Prods=document.getElementsByClassName("ProductDisplayItem");
					if(Prods.length>0){
						for(Key in Prods){
							if(Prods[Key].style){
								Prods[Key].style.webkitTransform="rotate("+(-Rotation).toString()+"deg)";
								Prods[Key].style.MozTransform="rotate("+(-Rotation).toString()+"deg)";
							}
						}
					}
					*/
				}
			}

			function createNewProduct() {
				var newProductName = $("#new-product-name-input").val();
				window.product = Product(null, newProductName, 'Product Category', 'Product Sub-Category', 'Player Color');
				alert("New Product: " + window.product.toString());
			}
			function displayNewProductDialog() {
				$("#new-product-dialog").show();		
			}

			$(document).ready(function() {

				// Event assignments

				$("#new-product-button").click(function() {
					displayNewProductDialog();
				})
				$("#new-product-make-button").click(function() {
					createNewProduct();	
				})

			});
			
		</script>
		<link rel="stylesheet" type="text/css" href="../css/shared.css"></link>
		<style>
			#GameBoardCircle
			{
				background-image:url('../images/gameboard_circle.png');
				position:absolute;
				top:0%;
				left:24%;
				width:600px;
				height:600px;
				webkit-transform-origin:50% 50%;
				moz-transform-origin:50% 50%;
			}
			#GameBoardCenter
			{
				background-image:url('../images/gameboard_center.png');
				position:absolute;
				top:0%;
				left:24%;
				width:800px;
				height:600px;
			}
			div.PlayerBox{
				position:absolute;
				border-style:solid;
				border-width:7px;
				width:30%;
				height:15%;
				box-shadow: 0px 0px 40px 5px #AAAAAA;
			}
			div.PlayerBox{
				position:absolute;
				border-style:solid;
				border-width:7px;
				width:30%;
				height:15%;
				box-shadow: 0px 0px 40px 5px #AAAAAA;
				background:rgba(0,0,0,.1);
				-moz-border-radius:10px;
				-webkit-border-radius:10px;
				border-radius:10px;
			}
		</style>
	</head>
	
	
	<body onload="Initialize()">
		<div id="MainBackground">
			<div id="MainBoard">
				<div class="PlayerBox" id="PlyOneScbdBox" style="border-color:grey;width:25%;left:1%;top:1%;">
					<div class="StandardText" id="PlyOneScbdName" style="font-size:25px;left:14%;top:5%;">nil</div>
					<div class="StandardText" style="font-size:18px;left:14%;top:35%;color:rgb(120,120,120)">$<span id="PlyOneScbdMoney" style="color:white">nil</span><sup style="font-size:10px">.00</sup></div>
					<div class="StandardText" style="font-size:10px;left:12%;top:62%;color:rgb(120,120,120);font-size:10px">Products <span id="PlyOneScbdProds" style="color:white">nil</span></div>
					<div class="StandardText" style="font-size:10px;left:54%;top:62%;color:rgb(120,120,120);font-size:10px">Builders <span id="PlyOneScbdEmps" style="color:white">nil</span></div>
					<div class="StandardText" style="font-size:10px;left:12%;top:77%;color:rgb(120,120,120);font-size:10px">Designers <span id="PlyOneScbdProds" style="color:white">nil</span></div>
					<div class="StandardText" style="font-size:10px;left:54%;top:77%;color:rgb(120,120,120);font-size:10px">Testers <span id="PlyOneScbdEmps" style="color:white">nil</span></div>
				</div>
				</div>
				<div id="GameBoard">
					<div id="GameBoardCenter"></div>
					<div id="GameBoardCircle"></div>
					<button class="Smaller" id="TurnBoardCCWButton" style="top:26%;left:2%;width:5%;height:7%" onmousedown="RotateBegin(-1)" onmouseup="RotateEnd()"><</button>
					<button class="Smaller" id="TurnBoardCWButton" style="top:26%;left:14%;width:5%;height:7%" onmousedown="RotateBegin(1)" onmouseup="RotateEnd()">></button>
				</div>
				<button id="new-product-button" class="Smaller" style="top:80%;left:3%;width:10%;height:8%;">New<br>Product</button>		
			</div>
		</div>
<!-- hidden dom elements -->		
		<div class="popup" id="new-product-dialog">
			<h1>New Product</h1>
			<p>
			</p>
			<div>
				<p>
					Name:
					<input id="new-product-name-input" type="text">
				</p>
				<button class="Medium RoundEdge" id="new-product-make-button">Make</button>
				<button class="Medium RoundEdge" id="new-product-cancel-button">Cancel</button>
			</div>
			</div>
		</div>
	</body>
</html>