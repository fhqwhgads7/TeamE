<html>
<head>
	<title>Background Music </title>
	
	<script src = "http://code.jquery.com/jquery-2.1.0.min.js"></script>
	
	<script>
	
		jQuery(function($) {

			var supportsAudio = !!document.createElement('audio').canPlayType;
			if(supportsAudio) {
				var playing = false;
				mediaPath = '/assets/',
				extension = '.mp3',
				tracks = [
					{"track":1,"name":"Track 1","file":"1"},
					{"track":2,"name":"Track 2","file":"2"},
					{"track":3,"name":"Track 3","file":"3"},
				],
				trackCount = tracks.length,
				index = Math.floor(Math.random()*trackCount),
				npAction = $('#npAction'),
				npTitle = $('#npTitle'),
				audio = $('#audio1').bind('play', function() {
					playing = true;
					npAction.text('Now Playing:');
				}).bind('pause', function() {
					playing = false;
					npAction.text('Paused:');
				}).bind('ended', function() {
					npAction.text('Paused:');
					
					var curIndex = index;
					
					do{
					
						index = Math.floor(Math.random()*trackCount)
					
					}while(index == curIndex);
					
					loadTrack(index);
						audio.play();
					
					
				}).get(0),
				loadTrack = function(id) {
					npTitle.text(tracks[id].name);
					index = id;
					audio.src = tracks[id].file + extension;
				},
				playTrack = function(id) {
					loadTrack(id);
					audio.play();
				};

				if(audio.canPlayType('audio/ogg')) {
					extension = '.ogg';
				}
				if(audio.canPlayType('audio/mpeg')) {
					extension = '.mp3';
				}
				loadTrack(index);
				audio.play();
			}
		});
	
		
	</script>

</head>

<body>

    <div id="cwrap">
        <div id="audiowrap">
            <div id="audio0">
                <audio id="audio1">
                    Your browser does not support the HTML5 Audio Tag.
                </audio>
            </div>
        </div>
    </div>
</body>
</html>