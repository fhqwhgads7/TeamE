<!DOCTYPE html>
<html>
	<head>
		<script type="text/javascript" src="shared.js"></script>
		<link rel="stylesheet" type="text/css" href="Shared.css"></link>
		<script>
			var TheGame;
			var RotateDir=0;
			var Rotation=0;
			var CurrentlySelectedProduct;
			var ShowCashAlert=false;
			function Initialize(){
				var Gaem=GetGame();
				if(Gaem=="nil"){
					alert("WHAT HAVE YOU DONE");
					return;
				}
				TheGame=Gaem;
				TheGame.ActivePlayerNum=0;
				TheGame.ActivePlayer=TheGame.Players[TheGame.ActivePlayerNum];
				UpdatePlayerDisplay();
				PopulateNewProdCategories();
				TheGame.State=GameStates.PlayerTurnIdle;
				document.getElementById("RoundNumberDisplay").innerHTML=TheGame.CurrentRound.toString();
				setInterval("TipThink();",10);
				setInterval("RotateThink();",50);
				setTimeout(DisplayNewRoundEvent,100);
				document.getElementById("MainBoard").style.visibility="hidden";
				setTimeout(Appear,750);
			}
			function Appear(){
				document.getElementById("MainBoard").style.visibility="visible";
				ShowCashAlert=true;
			}
			function TipThink(){
				var Elem=document.getElementById("TipSpan");
				var Pos=parseInt(Elem.style.left.replace("px",""),10);
				var NewPos=Pos-1;
				if(NewPos<=-Elem.innerHTML.length*15){
					NewPos=BOARD_WIDTH+1;
					Elem.innerHTML=Tips[Math.floor((Math.random()*Tips.length))];
				}
				Elem.style.left=(NewPos).toString()+"px";
			}
			function PopulateNewProdCategories(){
				var Sel=document.getElementById("NewProductCategory");
				for(Item in ProductCategories){
					var Opt=document.createElement("option");
					Opt.value=Item;
					Opt.innerHTML=Item;
					Sel.appendChild(Opt);
				}
				Sel.options[0].selected="true";
				SelectProductCategory();
			}
			function SelectProductCategory(){
				var Sel=document.getElementById("NewProductCategory");
				var SubSel=document.getElementById("NewProductSubCategory");
				while(SubSel.options.length>0){
					SubSel.options[0]=null;
				}
				var Cat=Sel.options[Sel.selectedIndex].value;
				for(var i=0;i<ProductCategories[Cat].length;i++){
					var Opt=document.createElement("option");
					Opt.value=ProductCategories[Cat][i];
					Opt.innerHTML=ProductCategories[Cat][i];
					SubSel.appendChild(Opt);
				}
				SubSel.options[0].selected=true;
			}
			function UpdatePlayerDisplay(){
				var OldCash=parseInt(document.getElementById("CurrentPlayerMoney").innerHTML);
				var OldName=document.getElementById("CurrentPlayerName").innerHTML;
				var Ply=TheGame.ActivePlayer;
				var MainBox=document.getElementById("CurrentPlayerDisplay");
				MainBox.style.borderColor=Ply.Color;
				document.getElementById("CurrentPlayerName").innerHTML=Ply.Name;
				if(Ply.Name.length>15){document.getElementById("CurrentPlayerName").title=Ply.Name;}
				document.getElementById("CurrentPlayerMoney").innerHTML=Ply.Money.toString();
				document.getElementById("CurrentPlayerProdNum").innerHTML=Ply.NumProducts.toString();
				document.getElementById("CurrentPlayerDesigners").innerHTML=Ply.NumCreative.toString();
				document.getElementById("CurrentPlayerDevelopers").innerHTML=Ply.NumDevs.toString();
				document.getElementById("CurrentPlayerTesters").innerHTML=Ply.NumQA.toString();
				setTimeout(VisualCashAlert,100);
			}
			function CycleTurn(){
				if(TheGame.NumPlayers>1){
					var WillGo=false;
					var NewPlyNum=TheGame.ActivePlayerNum+1;
					if(NewPlyNum>(TheGame.NumPlayers-1)){
						NewPlyNum=0;
						var WillGo=true;
					}
					TheGame.ActivePlayerNum=NewPlyNum;
					TheGame.ActivePlayer=TheGame.Players[TheGame.ActivePlayerNum];
					document.getElementById("CurProdAdvanceButton").disabled=true;
					document.getElementById("ProductWindow").style.visibility="hidden";
					if(CurrentlySelectedProduct!=null){
						UpdateCurProdDisplay(CurrentlySelectedProduct.DisplayElemID);
					}
					TheGame.State=GameStates.PlayerTurnIdle;
					if(WillGo){
						DisplayNewRoundEvent();
					}else{
						playSound(GameSounds.NextTurn);
						UpdatePlayerDisplay();
					}
				}else{
					DisplayNewRoundEvent();
				}
			}
			function NewRoundCalc(){
				for(var i=0;i<TheGame.Players.length;i++){
					var Ply=TheGame.Players[i];
					if(Ply.NumProducts>0){
						for(var j=0;j<Ply.Products.length;j++){
							var Prod=Ply.Products[j];
							if(Prod.Phase==ProductPhases.Idea){
								Prod.IdeaStrength=Prod.IdeaStrength+1;
							}else if(Prod.Phase==ProductPhases.Design){
								Prod.DesignStrength=Prod.DesignStrength+Ply.NumCreative;
							}else if(Prod.Phase==ProductPhases.Prototype){
								//derp
							}else if(Prod.Phase==ProductPhases.PrototypeTesting){
								Prod.DesignStrength=Prod.DesignStrength+Math.ceil(Ply.NumQA*.6);
							}else if(Prod.Phase==ProductPhases.Development){
								Prod.BuildStrength=Prod.BuildStrength+Ply.NumDevs;
							}else if(Prod.Phase==ProductPhases.PreDepTesting){
								Prod.BuildStrength=Prod.BuildStrength+Math.ceil(Ply.NumQA*.6);
							}else if(Prod.Phase==ProductPhases.Deployment){
								//derp
							}else if(Prod.Phase==ProductPhases.PostDepTesting){
								//derp
							}else if(Prod.Phase==ProductPhases.Maintenance){
								//derp
							}
						}
					}
				}
				for(var i=0;i<TheGame.Players.length;i++){
					var Ply=TheGame.Players[i];
					var Net=0;
					if(Ply.NumProducts<1){
						Net=BasePayouts.DayJobEachTurn;
					}else{
						for(var j=0;j<Ply.Products.length;j++){
							var Prod=Ply.Products[j];
							if(Prod.Phase==ProductPhases.Maintenance){
								Net=Net+(Prod.IdeaStrength^2)*(Prod.DesignStrength^1.1)*(Prod.BuildStrength^1.1)*4;
							}
						}
					}
					Net=Net-((BaseCosts.PayDev*Ply.NumDevs)+(BaseCosts.PayQA*Ply.NumQA)+(BaseCosts.PayCreative*Ply.NumCreative));
					Ply.Money=Ply.Money+Net;
				}
				TheGame.CurrentRound=TheGame.CurrentRound+1;
				document.getElementById("RoundNumberDisplay").innerHTML=TheGame.CurrentRound.toString();
				/* ---------------------------------
					DEMONSTRATION CODE
				-----------------------------------*/
				if(TheGame.CurrentRound==3){RandomEvent();}
				/*----------------------------------
					ORIGINAL CODE
				-----------------------------------*/
				//if(Math.random()<EVENT_CHANCE){RandomEvent();}
				UpdatePlayerDisplay();
				if(CurrentlySelectedProduct!=null){
					UpdateCurProdDisplay(CurrentlySelectedProduct.DisplayItemID);
				}
			}
			function RandomEvent(){
				playSound(GameSounds.Event);
				var Event=RandomEvents[Math.floor(Math.random()*RandomEvents.length)];
				var Msg=Event[0];
				var AoE=Event[1];
				var Action=Event[2];
				var Num=Event[3];
				var Desc="";
				if(AoE=="AllPlayers"){
					Desc="Everyone";
					if(Action=="CashChange"){
						if(Num>0){
							Desc=Desc+"'s cash increases by ";
						}
						Desc=Desc+Num.toString();
						Desc=Desc+" dollars.";
						for(PlyNum in TheGame.Players){
							var Ply=TheGame.Players[PlyNum];
							Ply.Money=Ply.Money+Num;
						}
					}
				}
				document.getElementById("RandomEventTitle").innerHTML=Msg;
				document.getElementById("RandomEventDesc").innerHTML=Desc;
				document.getElementById("ModalOverlay").style.visibility="visible";
				document.getElementById("RandomEventModal").style.visibility="visible";
			}
			function CloseEventModal(){
				document.getElementById("RandomEventModal").style.visibility="hidden";
				document.getElementById("ModalOverlay").style.visibility="hidden";
			}
			function DisplayNewRoundEvent(){
				var Num=TheGame.CurrentRound+1;
				if(Num>TheGame.MaxRounds){
					FinishGame();
					return;
				}
				var Elem=document.getElementById("MainBoard");
				Elem.style.transition="left .75s ease-out";
				Elem.style.left="800px";
				Elem=document.getElementById("RoundAnnouncer");
				Elem.innerHTML="ROUND<br>"+Num;
				Elem.style.transition="top .9s ease-out";
				Elem.style.top="100px";
				playSound(GameSounds.NextRound);
				setTimeout(function(){
					var Elem=document.getElementById("MainBoard");
					Elem.style.transition="none";
					Elem.style.left="-800px";
					setTimeout(function(){
						var Elem=document.getElementById("MainBoard");
						Elem.style.transition="left .65s ease-out";
						Elem.style.left="0px";
						Elem=document.getElementById("RoundAnnouncer");
						Elem.style.transition="top .5s ease-out";
						Elem.style.top="600px";
						setTimeout(function(){
							var Elem=document.getElementById("MainBoard");
							Elem.style.transition="none";
							Elem=document.getElementById("RoundAnnouncer");
							Elem.style.transition="none";
							Elem.style.top="-600px";
							NewRoundCalc();
						},650);
					},750);
				},650);
			}
			function FinishGame(){
				OpenScoreboard(true);
			}
			function OpenNewProductModal(){
				TheGame.State=GameStates.PlayerCreatingProduct;
				document.getElementById("NewProductModalPlayerName").innerHTML=TheGame.ActivePlayer.Name;
				document.getElementById("NewProductName").value="";
				document.getElementById("ModalOverlay").style.visibility="visible";
				document.getElementById("NewProductModal").style.visibility="visible";
			}
			function OpenEmployeeModal(){
				TheGame.State=GameStates.PlayerManagingEmployees;
				document.getElementById("EmployeeModalPlayerName").innerHTML=TheGame.ActivePlayer.Name;
				UpdateEmployeeModalDisplay()
				document.getElementById("ModalOverlay").style.visibility="visible";
				document.getElementById("EmployeeModal").style.visibility="visible";
			}
			function TryToCreateNewProduct(){
				var Name=document.getElementById("NewProductName").value;
				var CatElem=document.getElementById("NewProductCategory");
				var Cat=CatElem.options[CatElem.selectedIndex].value;
				var SubCatElem=document.getElementById("NewProductSubCategory");
				var SubCat=SubCatElem.options[SubCatElem.selectedIndex].value;
				if((Name)&&(Cat)&&(SubCat)){
					var NewProd=new Product(TheGame.ActivePlayer,Name,Cat,SubCat,TheGame.ActivePlayer.Color)
					NewProd.Phase=ProductPhases.Idea;
					playSound(GameSounds.ProductPlacement);
					document.getElementById("ModalOverlay").style.visibility="hidden";
					document.getElementById("NewProductModal").style.visibility="hidden";
					CreateProductDisplay(NewProd);
					TheGame.State=GameStates.PlayerTurnIdle;
				}else{
					ModalFailure(document.getElementById("NewProductModal"));
				}
			}
			function ModalFailure(elem){
				elem.style.borderColor="red";
				setTimeout(function(){elem.style.borderColor="gray";},100);
				setTimeout(function(){elem.style.borderColor="red";},200);
				setTimeout(function(){elem.style.borderColor="gray";},300);
				setTimeout(function(){elem.style.borderColor="red";},400);
				setTimeout(function(){elem.style.borderColor="gray";},500);
				playSound(GameSounds.Wrong);
			}
			function CreateProductDisplay(prod){
				var GameBoard=document.getElementById("GameBoardCircle");
				var ProdElem=document.createElement("div");
				ProdElem.id="ProductDisplayItem_"+prod.OwnerNumber+"_"+prod.Number;
				prod.DisplayItemID=ProdElem.id;
				ProdElem.addEventListener("click",function(){UpdateCurProdDisplay(ProdElem.id);});
				ProdElem.className="ProductDisplayItem";
				ProdElem.style.backgroundImage="url('product_icons/"+prod.Category.toLowerCase()+"_"+prod.SubCategory.toLowerCase()+".png')";
				ProdElem.style.left="0px";
				ProdElem.style.top="0px";
				ProdElem.style.borderStyle="outset";
				ProdElem.style.borderColor=PlayerColors[prod.Color];
				ProdElem.style.backgroundColor=prod.Color;
				ProdElem.style.webkitTransform="rotate("+(-Rotation).toString()+"deg)";
				ProdElem.style.MozTransform="rotate("+(-Rotation).toString()+"deg)";
				GameBoard.appendChild(ProdElem);
				UpdateProductDisplayPosition(prod);
				UpdatePlayerDisplay();
				UpdateCurProdDisplay(ProdElem.id);
			}
			function GetPlyAndProdFromDispElemID(id){
				var NewID=id.replace("ProductDisplayItem_","");
				var IDNums=NewID.split("_");
				var PlayerID=parseInt(IDNums[0]);
				var ProductID=parseInt(IDNums[1]);
				var Ply=TheGame.Players[PlayerID]
				var Prod=Ply.Products[ProductID]
				return [Ply,Prod];
			}
			function UpdateCurProdDisplay(id){
				if(id){
					var PlyProd=GetPlyAndProdFromDispElemID(id);
					CurrentlySelectedProduct=PlyProd[1];
					if(PlyProd[1].OwnerNumber==TheGame.ActivePlayerNum){
						document.getElementById("CurProdAdvanceButton").disabled=false;
						document.getElementById("ProductWindow").style.visibility="visible";
					}else{
						document.getElementById("CurProdAdvanceButton").disabled=true;
						document.getElementById("ProductWindow").style.visibility="hidden";
					}
					document.getElementById("ProdDisplayName").innerHTML=PlyProd[1].Name;
					document.getElementById("ProdOwnerDisplayName").innerHTML=PlyProd[0].Name;
					document.getElementById("DisplayCAT").innerHTML=PlyProd[1].Category;
					document.getElementById("DisplaySUBCAT").innerHTML=PlyProd[1].SubCategory;
					document.getElementById("DisplayPIS").innerHTML=PlyProd[1].IdeaStrength.toString();
					document.getElementById("DisplayPDS").innerHTML=PlyProd[1].DesignStrength.toString();
					document.getElementById("DisplayPBS").innerHTML=PlyProd[1].BuildStrength.toString();
					document.getElementById("DisplayPPhase").innerHTML=PlyProd[1].Phase;
					document.getElementById("DisplayPFID").innerHTML=PlyProd[1].Number.toString();
				}
			}
			function UpdateProductDisplayPosition(prod){
				var AlreadyThere=-2;
				for(Biz in TheGame.Players){
					for(Prod in TheGame.Players[Biz].Products){
						if(TheGame.Players[Biz].Products[Prod].Phase==prod.Phase){
							AlreadyThere=AlreadyThere+1;
						}
					}
				}
				var Add=15*AlreadyThere;
				var ProdElem=document.getElementById("ProductDisplayItem_"+prod.OwnerNumber+"_"+prod.Number);
				setTimeout(function(){
					ProdElem.style.left=(PhasePositions[prod.Phase][0]+Add).toString()+"px";
					ProdElem.style.top=(PhasePositions[prod.Phase][1]+Add).toString()+"px";
				},1);
			}
			function TryToAdvanceProduct(){
				var CurPhase=CurrentlySelectedProduct.Phase;
				if(CurPhase!=ProductPhases.Maintenance)
					playSound(GameSounds.AdvanceProduct);
				if(CurPhase==ProductPhases.Idea){
					CurrentlySelectedProduct.Phase=ProductPhases.Design;
				}else if(CurPhase==ProductPhases.Design){
					CurrentlySelectedProduct.Phase=ProductPhases.Prototype;
				}else if(CurPhase==ProductPhases.Prototype){
					TheGame.ActivePlayer.Money=TheGame.ActivePlayer.Money-BaseCosts.Prototype;
					UpdatePlayerDisplay();
					CurrentlySelectedProduct.Phase=ProductPhases.PrototypeTesting;
				}else if(CurPhase==ProductPhases.PrototypeTesting){
					CurrentlySelectedProduct.Phase=ProductPhases.Development;
				}else if(CurPhase==ProductPhases.Development){
					CurrentlySelectedProduct.Phase=ProductPhases.PreDepTesting;
				}else if(CurPhase==ProductPhases.PreDepTesting){
					CurrentlySelectedProduct.Phase=ProductPhases.Deployment;
				}else if(CurPhase==ProductPhases.Deployment){
					TheGame.ActivePlayer.Money=TheGame.ActivePlayer.Money-BaseCosts.Deployment;
					UpdatePlayerDisplay();
					CurrentlySelectedProduct.Phase=ProductPhases.PostDepTesting;
				}else if(CurPhase==ProductPhases.PostDepTesting){
					CurrentlySelectedProduct.Phase=ProductPhases.Maintenance;
				}else if(CurPhase==ProductPhases.Maintenance){
					playSound(GameSounds.Wrong);
				}
				UpdateProductDisplayPosition(CurrentlySelectedProduct);
				UpdateCurProdDisplay(CurrentlySelectedProduct.DisplayItemID);
				UpdatePlayerDisplay();
			}
			function CancelNewProduct(){
				document.getElementById("ModalOverlay").style.visibility="hidden";
				document.getElementById("NewProductModal").style.visibility="hidden";
			}
			function CloseEmployeeModal(){
				UpdatePlayerDisplay()
				document.getElementById("ModalOverlay").style.visibility="hidden";
				document.getElementById("EmployeeModal").style.visibility="hidden";
				TheGame.State=GameStates.PlayerTurnIdle;
			}
			function VisualCashAlert(){
				var Ply=TheGame.ActivePlayer;
				var Amt=Ply.Money-Ply.LastDisplayedMoney;
				if(Amt==0){return;}
				var Elem=document.getElementById("CashAlert");
				var Str="";
				var Col="";
				if(Amt<0){
					Col="red";
					Str="-$";
					playSound(GameSounds.LoseMoney);
				}else{
					Col="cyan";
					Str="+$";
					playSound(GameSounds.GainMoney);
				}
				Str=Str+Amt.toString().replace("-","");
				ResetCashDisplayPos();
				Elem.innerHTML=Str;
				Elem.style.color=Col;
				Elem.style.transition="top 2.2s ease-in,left 2.2s ease-in,opacity 2s ease-in";
				Elem.style.top="5%";
				Elem.style.left="40%";
				Elem.style.opacity="0";
				if(ShowCashAlert){Elem.style.visibility="visible";}
				setTimeout(ResetCashDisplayPos,2200);
				Ply.LastDisplayedMoney=Ply.Money;
			}
			function ResetCashDisplayPos(){
				var Elem=document.getElementById("CashAlert");
				Elem.style.transition="none";
				Elem.style.top="9%";
				Elem.style.left="20%";
				Elem.style.opacity="1";
				Elem.style.visibility="hidden";
			}
			function RotateBegin(dir){
				RotateDir=dir*5;
			}
			function RotateEnd(){
				RotateDir=0;
			}
			function RotateThink(){
				if(RotateDir!=0){
					Rotation=Rotation+RotateDir;
					if((RotateDir>=360)||(RotateDir<=-360)){RotateDir=0;}
					document.getElementById("GameBoardCircle").style.webkitTransform="rotate("+Rotation.toString()+"deg)";
					document.getElementById("GameBoardCircle").style.MozTransform="rotate("+Rotation.toString()+"deg)";
					var Prods=document.getElementsByClassName("ProductDisplayItem");
					if(Prods.length>0){
						for(Key in Prods){
							if(Prods[Key].style){
								Prods[Key].style.webkitTransform="rotate("+(-Rotation).toString()+"deg)";
								Prods[Key].style.MozTransform="rotate("+(-Rotation).toString()+"deg)";
							}
						}
					}
				}
			}
			function ChangeEmployee(type,num){
				TheGame.ActivePlayer[type]=TheGame.ActivePlayer[type]+num;
				if(num>0){
					var Val=0;
					if(type=="NumDevs"){
						Val=BaseCosts.HireDev;
					}else if(type=="NumQA"){
						Val=BaseCosts.HireQA;
					}else{
						Val=BaseCosts.HireCreative;
					}
					TheGame.ActivePlayer.Money=TheGame.ActivePlayer.Money-num*Val;
				}
				if(TheGame.ActivePlayer[type]<0){
					TheGame.ActivePlayer[type]=0;
				}
				UpdateEmployeeModalDisplay();
			}
			function UpdateEmployeeModalDisplay(){
				document.getElementById("EmployeeModalCreativeNum").innerHTML=TheGame.ActivePlayer.NumCreative.toString();
				document.getElementById("EmployeeModalDevNum").innerHTML=TheGame.ActivePlayer.NumDevs.toString();
				document.getElementById("EmployeeModalQANum").innerHTML=TheGame.ActivePlayer.NumQA.toString();
				document.getElementById("EmployeeModalQANum").innerHTML=TheGame.ActivePlayer.NumQA.toString();
			}
			function OpenScoreboard(end){
				TheGame.State=GameStates.PlayerWatchingScoreboard;
				if(end){
					document.getElementById("ScoreboardTitle").innerHTML="Game Over";
					document.getElementById("ScoreboardClose").innerHTML="Quit";
				}else{
					document.getElementById("ScoreboardTitle").innerHTML="Competitors";
					document.getElementById("ScoreboardClose").innerHTML="Done";
				}
				for(PlyNum in TheGame.Players){
					var Ply=TheGame.Players[PlyNum];
					var Str="";
					if(PlyNum==0){Str="PlyOne";}else if(PlyNum==1){Str="PlyTwo";}else if(PlyNum==2){Str="PlyThree";}else if(PlyNum==3){Str="PlyFour";}else if(PlyNum==4){Str="PlyFive";}else if(PlyNum==5){Str="PlySix";}
					if((TheGame.ActivePlayerNum!=PlyNum)||(end)){
						document.getElementById(Str+"ScbdBox").style.visibility="visible";
						document.getElementById(Str+"ScbdBox").style.borderColor=Ply.Color;
						document.getElementById(Str+"ScbdName").innerHTML=Ply.Name;
						document.getElementById(Str+"ScbdMoney").innerHTML=Ply.Money;
						document.getElementById(Str+"ScbdProds").innerHTML=Ply.NumProducts;
						document.getElementById(Str+"ScbdEmps").innerHTML=Ply.NumQA+Ply.NumDevs+Ply.NumCreative;
					}
				}
				document.getElementById("ModalOverlay").style.visibility="visible";
				document.getElementById("Scoreboard").style.visibility="visible";
			}
			function CloseScoreboard(){
				TheGame.State=GameStates.PlayerTurnIdle;
				if(document.getElementById("ScoreboardClose").innerHTML=="Quit"){
					window.location="MainMenu.html";
				}else{
					document.getElementById("ModalOverlay").style.visibility="hidden";
					document.getElementById("Scoreboard").style.visibility="hidden";
					document.getElementById("PlyOneScbdBox").style.visibility="hidden";
					document.getElementById("PlyTwoScbdBox").style.visibility="hidden";
					document.getElementById("PlyThreeScbdBox").style.visibility="hidden";
					document.getElementById("PlyFourScbdBox").style.visibility="hidden";
					document.getElementById("PlyFiveScbdBox").style.visibility="hidden";
					document.getElementById("PlySixScbdBox").style.visibility="hidden";
				}
			}
			function QuitGame(){
				SetGame("nil");
				window.location="MainMenu.html";
			}
		</script>
		<style>
			#CurrentPlayerDisplay{
				position:absolute;
				top:4%;
				left:3%;
				width:200px;
				height:100px;
				border-style:solid;
				border-width:8px;
				box-shadow: 0px 0px 40px 5px #EEEEEE;
			}
			#GameBoardCircle{
				background-image:url('gameboard_circle.png');
				position:absolute;
				top:0%;
				left:24%;
				width:600px;
				height:600px;
				webkit-transform-origin:50% 50%;
				moz-transform-origin:50% 50%;
			}
			#GameBoardCenter{
				background-image:url('gameboard_center.png');
				position:absolute;
				top:0%;
				left:24%;
				width:800px;
				height:600px;
			}
			#ProductWindow{
				position:absolute;
				top:35%;
				left:3%;
				width:19%;
				height:40%;
				border-style:solid;
				border-width:8px;
				border-color:gray;
				background-color:rgba(0,0,0,.8);
			}
			#CashAlert{
				font-family:arial;
				font-size:30px;
				font-weight:400;
				position:absolute;
				top:9%;
				left:20%;
				color:red;
				text-shadow:-1px -1px 1px #FFFFFF,1px 1px 1px #000000,3px 3px 5px #000000;
				transition:top 2.2s ease-in,left 2.2s ease-in,opacity 2s ease-in;
				visibility:hidden;
			}
			div.ProductDisplayItem{
				background-repeat:no-repeat;
				background-position:center;
				background-size:35px 35px;
				position:absolute;
				width:50px;
				height:50px;
				background-color:red;
				border-radius:20px;
				border-width:5px;
				border-color:red;
				box-shadow:4px 4px 15px -2px #000000;
				transition:top 1s ease-out,left 1s ease-out;
				webkit-transform-origin:50% 50%;
				moz-transform-origin:50% 50%;
			}
			div.PlayerBox{
				position:absolute;
				border-style:solid;
				border-width:7px;
				width:30%;
				height:15%;
				box-shadow: 0px 0px 40px 5px #AAAAAA;
			}
		</style>
	</head>
	<body onload="Initialize()">
		<div id="MainBackground">
			<div id="MainBoard">
				<div id="CurrentPlayerDisplay" style="overflow:hidden">
					<div class="SmallText" id="CurrentPlayerName" style="top:8%;left:10%">nil</div>
					<div class="TinyText" style="top:33%;left:10%"><span style="color:rgb(120,120,120)">Money $</span><span id="CurrentPlayerMoney">0</span><sup style="color:rgb(120,120,120);font-size:7px">.00</sup></div>
					<div class="TinyText TwoColumnFirst" style="font-size:10px;top:58%"><span style="color:rgb(120,120,120)">Products </span><span id="CurrentPlayerProdNum">nil</span></div>
					<div class="TinyText TwoColumnSecond" style="font-size:10px;top:58%"><span style="color:rgb(120,120,120)">Designers </span><span id="CurrentPlayerDesigners">nil</span></div>
					<div class="TinyText TwoColumnFirst" style="font-size:10px;top:74%"><span style="color:rgb(120,120,120)">Developers </span><span id="CurrentPlayerDevelopers">nil</span></div>
					<div class="TinyText TwoColumnSecond" style="font-size:10px;top:74%"><span style="color:rgb(120,120,120)">Testers </span><span id="CurrentPlayerTesters">nil</span></div>
				</div>
				<div class="TinyText" style="left:86.5%;top:10.5%;color:rgb(180,180,180)">Round</div>
				<div id="RoundNumberDisplay" class="SmallText" style="left:94%;top:10%">0</div>
				<div id="GameBoard">
					<div id="GameBoardCenter"></div>
					<div id="GameBoardCircle"></div>
					<button class="Small" id="TurnBoardCCWButton" style="top:26%;left:3%;width:5%" onmousedown="RotateBegin(-1)" onmouseup="RotateEnd()"><b><</b></button>
					<button class="Small" id="TurnBoardCWButton" style="top:26%;left:19%;width:5%" onmousedown="RotateBegin(1)" onmouseup="RotateEnd()"><b>></b></button>
				</div>
				<div id="ProductWindow" style="overflow:hidden;visibility:hidden">
					<div class="TinyText" style="left:10%;top:2%;color:white;font-size:14px;text-align:center"><span id="ProdDisplayName">nil</span><sup style="font-size:10px;color:rgb(120,120,120)">&reg;</sup></div>
					<div class="TinyText" style="left:10%;top:20%;font-size:11px;text-align:left"><span style="color:rgb(120,120,120)">By </span><span id="ProdOwnerDisplayName">nil</span><sup style="color:rgb(120,120,120)">&trade;</sup></div>
					<div class="TinyText" style="left:6%;top:35%;font-size:10px"><span style="color:rgb(120,120,120)">Category </span><span id="DisplayCAT">0</span></div>
					<div class="TinyText" style="left:6%;top:42%;font-size:8px"><span style="color:rgb(120,120,120)">Subcategory </span><span id="DisplaySUBCAT">0</span></div>
					<div class="TinyText" style="left:6%;top:47%;font-size:10px"><span style="color:rgb(120,120,120)">Idea Strength </span><span id="DisplayPIS">0</span></div>
					<div class="TinyText" style="left:6%;top:53%;font-size:10px"><span style="color:rgb(120,120,120)">Design Strength </span><span id="DisplayPDS">0</span></div>
					<div class="TinyText" style="left:6%;top:59%;font-size:10px"><span style="color:rgb(120,120,120)">Build Strength </span><span id="DisplayPBS">0</span></div>
					<div class="TinyText" style="text-overflow:hidden;left:6%;top:66%;font-size:8px"><span style="color:rgb(120,120,120)">Phase </span><span id="DisplayPPhase">nil</span></div>
					<div class="TinyText" style="left:6%;top:71%;font-size:10px"><span style="color:rgb(120,120,120)">PFID </span><span id="DisplayPFID">0</span></div>
					<button class="Small" id="CurProdAdvanceButton" style="top:80%;left:10%;height:15%;width:80%;" onclick="TryToAdvanceProduct();" disabled>Advance</button>
				</div>
				<button class="Small RoundEdge" onclick="CycleTurn()" style="top:2%;left:83%;">End Turn</button>
				<button class="Small RoundEdge" onclick="QuitGame()" style="top:91%;left:83%;">Quit Game</button>
				<button class="Small" onclick="OpenNewProductModal()" style="top:80%;left:3%;width:10%;height:8%;">New<br>Product</button>		
				<button class="Small" onclick="OpenEmployeeModal()" style="top:80%;left:14%;width:13%;height:8%;">Employees</button>	
				<button class="Small" onclick="OpenScoreboard(false)" style="top:89%;left:3%;width:15%;height:8%;">Competition</button>
				<div id="ModalOverlay" style="visibility:hidden;position:absolute;width:100%;height:100%;background-color:rgba(0,0,0,.5);">
					<div class="NewActionModal RoundEdge" id="NewProductModal" style="visibility:hidden;overflow:hidden">
						<div class="TinyText" id="NewProductModalPlayerName" style="top:6%;left:18%">nil</div>
						<div class="SmallText" id="NewProductModalTitle" style="left:18%;top:10%;">Create New Product</div>
						<textarea id="NewProductName" class="OneColumn" placeholder="Product Name" style="top:30%;width:77%;"></textarea>
						<select class="OneColumn" id="NewProductCategory" style="top:50%;" onchange="SelectProductCategory()">
							<!-- dynamic -->
						</select>
						<select class="OneColumn" id="NewProductSubCategory" style="top:60%;">
							<!-- dynamic -->
						</select>
						<button class="Big" id="NewProductCancelButton" onclick="CancelNewProduct()" style="top:87%;left:5%;width:42%;">Cancel</button>
						<button class="Big" id="NewProductGoButton" onclick="TryToCreateNewProduct()" style="top:87%;left:53%;width:42%;">Create</button>
					</div>
					<div class="NewActionModal RoundEdge" id="RandomEventModal" style="visibility:hidden;overflow:wrap">
						<div class="BigText" id="RandomEventTitle" style="left:14%;top:10%;">nil</div>
						<div class="TinyText" id="RandomEventDesc" style="left:5%;top:30%;">nil</div>
						<img src="cash.png" style="position:absolute;left:9%;top:40%"></img>
						<button class="Big" id="EventModalCloseButton" onclick="CloseEventModal()" style="top:87%;left:10%;width:80%;">Ok</button>
					</div>
					<div class="NewActionModal RoundEdge" id="EmployeeModal" style="visibility:hidden;overflow:hidden">
						<div class="TinyText" id="EmployeeModalPlayerName" style="top:6%;left:18%">nil</div>
						<div class="SmallText" id="EmployeeModalTitle" style="left:18%;top:10%;">Manage Employees</div>
						<div class="TinyText" style="left:37%;top:30%;">Designers</div>
						<button class="Small" style="top:35%;left:59%;width:20%" onmousedown="ChangeEmployee('NumCreative',1)" onmouseup="RotateEnd()"><b>+</b></button>
						<div class="SmallText" id="EmployeeModalCreativeNum" style="left:47%;top:35%;">0</div>
						<button class="Small" style="top:35%;left:19%;width:20%" onmousedown="ChangeEmployee('NumCreative',-1)" onmouseup="RotateEnd()"><b>-</b></button>
						<div class="TinyText" style="left:37%;top:50%;">Developers</div>
						<button class="Small" style="top:55%;left:59%;width:20%" onmousedown="ChangeEmployee('NumDevs',1)" onmouseup="RotateEnd()"><b>+</b></button>
						<div class="SmallText" id="EmployeeModalDevNum" style="left:47%;top:55%;">0</div>
						<button class="Small" style="top:55%;left:19%;width:20%" onmousedown="ChangeEmployee('NumDevs',-1)" onmouseup="RotateEnd()"><b>-</b></button>
						<div class="TinyText" style="left:39%;top:70%;">Testers</div>
						<button class="Small" style="top:75%;left:59%;width:20%" onmousedown="ChangeEmployee('NumQA',1)" onmouseup="RotateEnd()"><b>+</b></button>
						<div class="SmallText" id="EmployeeModalQANum" style="left:47%;top:75%;">0</div>
						<button class="Small" style="top:75%;left:19%;width:20%" onmousedown="ChangeEmployee('NumQA',-1)" onmouseup="RotateEnd()"><b>-</b></button>
						<button class="Big" id="EmployeeCancelButton" onclick="CloseEmployeeModal()" style="top:87%;left:10%;width:80%;height:10%">Done</button>
					</div>
					<div class="NewActionModal RoundEdge" id="Scoreboard" style="visibility:hidden;overflow:hidden;width:75%;left:11%">
						<div class="BigText" id="ScoreboardTitle" style="left:27%;top:3%;">nil</div>
						<div class="PlayerBox" id="PlyOneScbdBox" style="visibility:hidden;border-color:red;left:13%;top:19%;">
							<div class="SmallText" id="PlyOneScbdName" style="left:14%;top:5%;">nil</div>
							<div class="SmallText" style="left:14%;top:35%;color:rgb(120,120,120)">$<span id="PlyOneScbdMoney" style="color:white">nil</span><sup style="font-size:10px">.00</sup></div>
							<div class="TinyText" style="left:14%;top:70%;color:rgb(120,120,120);font-size:10px">Products <span id="PlyOneScbdProds" style="color:white">nil</span></div>
							<div class="TinyText" style="left:55%;top:70%;color:rgb(120,120,120);font-size:10px">Employees <span id="PlyOneScbdEmps" style="color:white">nil</span></div>
						</div>
						<div class="PlayerBox" id="PlyTwoScbdBox" style="visibility:hidden;border-color:red;left:55%;top:19%;">
							<div class="SmallText" id="PlyTwoScbdName" style="left:14%;top:5%;">nil</div>
							<div class="SmallText" style="left:14%;top:35%;color:rgb(120,120,120)">$<span id="PlyTwoScbdMoney" style="color:white">nil</span><sup style="font-size:10px">.00</sup></div>
							<div class="TinyText" style="left:14%;top:70%;color:rgb(120,120,120);font-size:10px">Products <span id="PlyTwoScbdProds" style="color:white">nil</span></div>
							<div class="TinyText" style="left:55%;top:70%;color:rgb(120,120,120);font-size:10px">Employees <span id="PlyTwoScbdEmps" style="color:white">nil</span></div>
						</div>
						<div class="PlayerBox" id="PlyThreeScbdBox" style="visibility:hidden;border-color:red;left:13%;top:41%;">
							<div class="SmallText" id="PlyThreeScbdName" style="left:14%;top:5%;">nil</div>
							<div class="SmallText" style="left:14%;top:35%;color:rgb(120,120,120)">$<span id="PlyThreeScbdMoney" style="color:white">nil</span><sup style="font-size:10px">.00</sup></div>
							<div class="TinyText" style="left:14%;top:70%;color:rgb(120,120,120);font-size:10px">Products <span id="PlyThreeScbdProds" style="color:white">nil</span></div>
							<div class="TinyText" style="left:55%;top:70%;color:rgb(120,120,120);font-size:10px">Employees <span id="PlyThreeScbdEmps" style="color:white">nil</span></div>
						</div>
						<div class="PlayerBox" id="PlyFourScbdBox" style="visibility:hidden;border-color:red;left:55%;top:41%;">
							<div class="SmallText" id="PlyFourScbdName" style="left:14%;top:5%;">nil</div>
							<div class="SmallText" style="left:14%;top:35%;color:rgb(120,120,120)">$<span id="PlyFourScbdMoney" style="color:white">nil</span><sup style="font-size:10px">.00</sup></div>
							<div class="TinyText" style="left:14%;top:70%;color:rgb(120,120,120);font-size:10px">Products <span id="PlyFourScbdProds" style="color:white">nil</span></div>
							<div class="TinyText" style="left:55%;top:70%;color:rgb(120,120,120);font-size:10px">Employees <span id="PlyFourScbdEmps" style="color:white">nil</span></div>
						</div>
						<div class="PlayerBox" id="PlyFiveScbdBox" style="visibility:hidden;border-color:red;left:13%;top:63%;">
							<div class="SmallText" id="PlyFiveScbdName" style="left:14%;top:5%;">nil</div>
							<div class="SmallText" style="left:14%;top:35%;color:rgb(120,120,120)">$<span id="PlyFiveScbdMoney" style="color:white">nil</span><sup style="font-size:10px">.00</sup></div>
							<div class="TinyText" style="left:14%;top:70%;color:rgb(120,120,120);font-size:10px">Products <span id="PlyFiveScbdProds" style="color:white">nil</span></div>
							<div class="TinyText" style="left:55%;top:70%;color:rgb(120,120,120);font-size:10px">Employees <span id="PlyFiveScbdEmps" style="color:white">nil</span></div>
						</div>
						<div class="PlayerBox" id="PlySixScbdBox" style="visibility:hidden;border-color:red;left:55%;top:63%;">
							<div class="SmallText" id="PlySixScbdName" style="left:14%;top:5%;">nil</div>
							<div class="SmallText" style="left:14%;top:35%;color:rgb(120,120,120)">$<span id="PlySixScbdMoney" style="color:white">nil</span><sup style="font-size:10px">.00</sup></div>
							<div class="TinyText" style="left:14%;top:70%;color:rgb(120,120,120);font-size:10px">Products <span id="PlySixScbdProds" style="color:white">nil</span></div>
							<div class="TinyText" style="left:55%;top:70%;color:rgb(120,120,120);font-size:10px">Employees <span id="PlySixScbdEmps" style="color:white">nil</span></div>
						</div>
						<button class="Big" id="ScoreboardClose" onclick="CloseScoreboard()" style="top:87%;left:10%;width:80%;height:10%">Done</button>
					</div>
				</div>
				<span id="CashAlert">0</span>
				<div class="TinyText" id="TipSpan" style="transition:none;white-space:nowrap;color:rgba(255,255,255,.4);top:97%;left:800px;">Choose this game for CST316 because it's the best!</div>
			</div>
			<div id="RoundAnnouncer">ROUND<br>1</div>
		</div>
	</body>
</html>