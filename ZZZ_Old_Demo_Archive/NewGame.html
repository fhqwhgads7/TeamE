<!DOCTYPE html>
<html>
	<head>
		<script type="text/javascript" src="shared.js"></script>
		<link rel="stylesheet" type="text/css" href="Shared.css"></link>
		<script>
			function Initialize(){
				SetGame("nil");
				PopulatePlayerColorFields();
			}
			function GoBackToMainMenu(){
				window.location="MainMenu.html";
			}
			function GoToGameBoard(){
				if(TryToMakeBrandNewGame()){
					window.location="GameBoard.html";
				}
			}
			function PopulatePlayerColorFields(){
				var Selects=document.getElementsByTagName("select");
				for(Select in Selects){
					var Sel=Selects[Select];
					if(Sel.getAttribute){
						var Id=Sel.getAttribute("id");
						if((Id.indexOf("Player")!=-1)&&(Id.indexOf("Color")!=-1)){
							for(Color in PlayerColors){
								var Opt=document.createElement("option");
								Opt.value=Color;
								Opt.innerHTML=Color;
								Sel.appendChild(Opt);
							}
							Sel.options[Select].selected="true";
							SetBoxColor(Sel.id);
						}
					}
				}
			}
			function TryToMakeBrandNewGame(){
				var Ya=true;
				var Msg="";
				var BoxOne=document.getElementById("PlayerOneType");
				var BoxTwo=document.getElementById("PlayerTwoType");
				var PlyOneName=document.getElementById("PlayerOneName").value;
				var PlyTwoName=document.getElementById("PlayerTwoName").value;
				var BoxOneVal=BoxOne.options[BoxOne.selectedIndex].value;
				var BoxTwoVal=BoxTwo.options[BoxTwo.selectedIndex].value;
				var ColBoxOne=document.getElementById("PlayerOneColor");
				var ColOne=ColBoxOne.options[ColBoxOne.selectedIndex].value;
				var ColBoxTwo=document.getElementById("PlayerTwoColor");
				var ColTwo=ColBoxTwo.options[ColBoxTwo.selectedIndex].value;
				var BoxThree=document.getElementById("PlayerThreeType");
				var BoxFour=document.getElementById("PlayerFourType");
				var PlyThreeName=document.getElementById("PlayerThreeName").value;
				var PlyFourName=document.getElementById("PlayerFourName").value;
				var BoxThreeVal=BoxThree.options[BoxThree.selectedIndex].value;
				var BoxFourVal=BoxFour.options[BoxFour.selectedIndex].value;
				var ColBoxThree=document.getElementById("PlayerThreeColor");
				var ColThree=ColBoxThree.options[ColBoxThree.selectedIndex].value;
				var ColBoxFour=document.getElementById("PlayerFourColor");
				var ColFour=ColBoxFour.options[ColBoxFour.selectedIndex].value;
				var BoxFive=document.getElementById("PlayerFiveType");
				var BoxSix=document.getElementById("PlayerSixType");
				var PlyFiveName=document.getElementById("PlayerFiveName").value;
				var PlySixName=document.getElementById("PlayerSixName").value;
				var BoxFiveVal=BoxFive.options[BoxFive.selectedIndex].value;
				var BoxSixVal=BoxSix.options[BoxSix.selectedIndex].value;
				var ColBoxFive=document.getElementById("PlayerFiveColor");
				var ColFive=ColBoxFive.options[ColBoxFive.selectedIndex].value;
				var ColBoxSix=document.getElementById("PlayerSixColor");
				var ColSix=ColBoxSix.options[ColBoxSix.selectedIndex].value;
				if((BoxOneVal!="Disabled")&&(!PlyOneName))
				{
						Ya=false;
						Msg="Business One needs a name!";
				}
				else if((BoxTwoVal!="Disabled")&&(!PlyTwoName))
				{
						Ya=false;
						Msg="Business Two needs a name!";
				}
				else if((BoxThreeVal!="Disabled")&&(!PlyThreeName))
				{
						Ya=false;
						Msg="Business Three needs a name!";
				}
				else if((BoxFourVal!="Disabled")&&(!PlyFourName))
				{
						Ya=false;
						Msg="Business Four needs a name!";
				}
				else if((BoxFiveVal!="Disabled")&&(!PlyFiveName))
				{
						Ya=false;
						Msg="Business Five needs a name!";
				}
				else if((BoxSixVal!="Disabled")&&(!PlySixName))
				{
						Ya=false;
						Msg="Business Six needs a name!";
				}
				else if ((BoxOneVal=="Disabled")&&(BoxTwoVal=="Disabled")&&(BoxThreeVal=="Disabled")&&(BoxFourVal=="Disabled")&&(BoxFiveVal=="Disabled")&&(BoxSixVal=="Disabled"))
				{
					Ya=false;
					Msg="You need at least one business active!";
				}
				var Array=[PlyOneName,PlyTwoName,PlyThreeName,PlyFourName,PlyFiveName,PlySixName];
				for(Ply in Array){
					for(OtherPly in Array){
						if(Array[Ply]==Array[OtherPly]){
							if((Array[Ply]!="")&&(Ply!=OtherPly)){
								Msg="Two players can't have the same name.";
								Ya=false;
							}
						}
					}
				}
				if(Ya==false){
					document.getElementById("FailureMsgTxt").innerHTML=Msg;
					document.getElementById("FailureMessageOverlay").style.visibility="visible";
					playSound(GameSounds.Message);
				}else{
					var OurGame=new Game();
					if(BoxOneVal!="Disabled"){
						new Player(OurGame,PlyOneName,BoxOneVal,ColOne);
					}
					if(BoxTwoVal!="Disabled"){
						new Player(OurGame,PlyTwoName,BoxTwoVal,ColTwo);
					}
					if(BoxThreeVal!="Disabled"){
						new Player(OurGame,PlyThreeName,BoxThreeVal,ColThree);
					}
					if(BoxFourVal!="Disabled"){
						new Player(OurGame,PlyFourName,BoxFourVal,ColFour);
					}
					if(BoxFiveVal!="Disabled"){
						new Player(OurGame,PlyFiveName,BoxFiveVal,ColFive);
					}
					if(BoxSixVal!="Disabled"){
						new Player(OurGame,PlySixName,BoxSixVal,ColSix);
					}
					SetGame(OurGame);
				}
				return Ya;
			}
			function HideError(){
				document.getElementById("FailureMessageOverlay").style.visibility="hidden";
			}
			function SetBoxColor(id){
				var SelBox=document.getElementById(id);
				var Col=SelBox.options[SelBox.selectedIndex].value;
				SelBox.parentNode.style.borderColor=Col;
			}
		</script>
		<style>
			#FailureMessage{
				position:absolute;
				font-align:center;
				font-family:"Arial";
				font-size:90px;
				font-color:white;
				width:85%;
				height:40%;
				left:7%;
				top:23%;
				border-style:solid;
				border-width:15px;
				border-color:red;
				background-color:rgba(0,0,0,1);
			}
			div.PlayerBox{
				position:absolute;
				border-style:solid;
				border-width:7px;
				width:30%;
				height:15%;
				box-shadow: 0px 0px 40px 5px #AAAAAA;
			}
		</style>
	</head>
	<body onload="Initialize()">
		<div id="MainBackground">
			<div class="MediumText" id="StartNewGameTitle" style="left:25%;top:10%;">Create New Game</div> 
			<div class="PlayerBox" id="PlayerOneBox" style="border-color:red;left:13%;top:22%;">
				<div class="SmallText" style="left:14%;top:5%;">Business One</div>
				<textarea id="PlayerOneName" class="OneColumn" placeholder="Business/Player Name" style="overflow:hidden;resize:none;top:40%;height:15%;width:77%;"></textarea>
				<select class="TwoColumnFirst" id="PlayerOneType" style="top:70%;">
					<option selected="selected">Player</option>
					<option>Computer</option>
					<option>Disabled</option>
				</select>
				<select class="TwoColumnSecond" id="PlayerOneColor" style="top:70%;" onchange="SetBoxColor(this.id)">
					<!-- dynamic -->
				</select>
			</div>
			<div class="PlayerBox" id="PlayerTwoBox" style="border-color:blue;left:56%;top:22%;">
				<div class="SmallText" style="left:21%;top:5%;">Business Two</div>
				<textarea id="PlayerTwoName" class="OneColumn" placeholder="Business/Player Name" style="overflow:hidden;resize:none;top:40%;height:15%;width:77%;"></textarea>
				<select class="TwoColumnFirst" id="PlayerTwoType" style="top:70%;">
					<option>Player</option>
					<option>Computer</option>
					<option selected="selected">Disabled</option>
				</select>
				<select class="TwoColumnSecond" id="PlayerTwoColor" style="top:70%;" onchange="SetBoxColor(this.id)">
					<!-- dynamic -->
				</select>
			</div>
			<div class="PlayerBox" id="PlayerThreeBox" style="border-color:green;left:13%;top:42%;">
				<div class="SmallText" style="left:14%;top:5%;">Business Three</div>
				<textarea id="PlayerThreeName" class="OneColumn" placeholder="Business/Player Name" style="overflow:hidden;resize:none;top:40%;height:15%;width:77%;"></textarea>
				<select class="TwoColumnFirst" id="PlayerThreeType" style="top:70%;">
					<option>Player</option>
					<option>Computer</option>
					<option selected="selected">Disabled</option>
				</select>
				<select class="TwoColumnSecond" id="PlayerThreeColor" style="top:70%;" onchange="SetBoxColor(this.id)">
					<!-- dynamic -->
				</select>
			</div>
			<div class="PlayerBox" id="PlayerFourBox" style="border-color:yellow;left:56%;top:42%;">
				<div class="SmallText" style="left:17%;top:5%;">Business Four</div>
				<textarea id="PlayerFourName" class="OneColumn" placeholder="Business/Player Name" style="overflow:hidden;resize:none;top:40%;height:15%;width:77%;"></textarea>
				<select class="TwoColumnFirst" id="PlayerFourType" style="top:70%;">
					<option>Player</option>
					<option>Computer</option>
					<option selected="selected">Disabled</option>
				</select>
				<select class="TwoColumnSecond" id="PlayerFourColor" style="top:70%;" onchange="SetBoxColor(this.id)">
					<!-- dynamic -->
				</select>
			</div>
			<div class="PlayerBox" id="PlayerFiveBox" style="border-color:black;left:13%;top:62%;">
				<div class="SmallText" style="left:17%;top:5%;">Business Five</div>
				<textarea id="PlayerFiveName" class="OneColumn" placeholder="Business/Player Name" style="overflow:hidden;resize:none;top:40%;height:15%;width:77%;"></textarea>
				<select class="TwoColumnFirst" id="PlayerFiveType" style="top:70%;">
					<option>Player</option>
					<option>Computer</option>
					<option selected="selected">Disabled</option>
				</select>
				<select class="TwoColumnSecond" id="PlayerFiveColor" style="top:70%;" onchange="SetBoxColor(this.id)">
					<!-- dynamic -->
				</select>
			</div>
			<div class="PlayerBox" id="PlayerSixBox" style="border-color:white;left:56%;top:62%;">
				<div class="SmallText" style="left:21%;top:5%;">Business Six</div>
				<textarea id="PlayerSixName" class="OneColumn" placeholder="Business/Player Name" style="overflow:hidden;resize:none;top:40%;height:15%;width:77%;"></textarea>
				<select class="TwoColumnFirst" id="PlayerSixType" style="top:70%;">
					<option>Player</option>
					<option>Computer</option>
					<option selected="selected">Disabled</option>
				</select>
				<select class="TwoColumnSecond" id="PlayerSixColor" style="top:70%;" onchange="SetBoxColor(this.id)">
					<!-- dynamic -->
				</select>
			</div>
			<button class="Big RoundEdge" onclick="GoBackToMainMenu()" style="left:15%;top:85%;">Main Menu</button>
			<button class="Big RoundEdge" onclick="GoToGameBoard()" style="left:55%;top:85%;">Start Game</button>
			<div id="FailureMessageOverlay" style="visibility:hidden;position:absolute;width:100%;height:100%;background-color:rgba(0,0,0,.7);">
				<div id="FailureMessage">
					<span style="color:white;position:absolute;left:30%;top:20%;font-family:'Arial';font-size:90px;font-weight:900;">Error!</span>
					<span id="FailureMsgTxt" style="text-align:center;color:white;position:absolute;left:0%;top:65%;font-family:'Arial';font-size:18px;font-weight:900;width:100%">fuck you</span>
					<button class="Big RoundEdge" onclick="HideError()" style="left:34%;top:85%;height:12%;font-size:15px;">Ok</button>
				</div>
			</div>
		</div>
	</body>
</html>